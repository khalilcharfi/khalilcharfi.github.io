<!DOCTYPE html>
<html lang="{{ language }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ title }}</title>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8QGDNBE3LW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-8QGDNBE3LW');
    </script>

    <!-- Preconnect to domains for faster loading -->
    <link rel="preconnect" href="https://khalilcharfi.github.io">
    
    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="/img/favicons/site.webmanifest">
    <link rel="mask-icon" href="/img/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/img/favicons/favicon.ico">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{{ meta.description }}">
    <meta name="keywords" content="{{ meta.keywords }}">
    <meta name="author" content="Khalil Charfi">
    <meta name="robots" content="index, follow">

    <!-- Hreflang Tags -->
    <link rel="alternate" hreflang="en" href="https://khalilcharfi.github.io/en/" />
    <link rel="alternate" hreflang="fr" href="https://khalilcharfi.github.io/fr/" />
    <link rel="alternate" hreflang="ar" href="https://khalilcharfi.github.io/ar/" />
    <link rel="alternate" hreflang="de" href="https://khalilcharfi.github.io/de/" />
    <link rel="alternate" hreflang="x-default" href="https://khalilcharfi.github.io/en/" />

    <!-- CSS -->
    <link rel="stylesheet" href="/css/styles.css">
    {% if language == 'ar' %}
    <link rel="stylesheet" href="/css/rtl.css">
    {% endif %}
    
    <style>
      /* Add any page-specific styles here */
    </style>
</head>
<body {% if language == 'ar' %}dir="rtl"{% endif %}>
    <header>
        <div class="container">
            <h1>{{ header.name }}</h1>
            <p class="tagline">{{ header.tagline }}</p>
            
            <nav>
                <ul>
                    {% for item in navigation %}
                    <li><a href="{{ item.url }}">{{ item.text }}</a></li>
                    {% endfor %}
                </ul>
            </nav>
            
            <div class="language-switcher">
                <a href="/en/" {% if language == 'en' %}class="active"{% endif %}>English</a>
                <a href="/fr/" {% if language == 'fr' %}class="active"{% endif %}>Français</a>
                <a href="/ar/" {% if language == 'ar' %}class="active"{% endif %}>العربية</a>
                <a href="/de/" {% if language == 'de' %}class="active"{% endif %}>Deutsch</a>
            </div>
        </div>
    </header>

    <main>
        <section id="about">
            <div class="container">
                <h2>{{ sections.about.title }}</h2>
                <div class="about-content">
                    <div class="about-text">
                        {{ sections.about.content | safe }}
                    </div>
                    <div class="about-image">
                        <img src="/img/profile.jpg" alt="{{ header.name }}">
                    </div>
                </div>
            </div>
        </section>

        <section id="skills">
            <div class="container">
                <h2>{{ sections.skills.title }}</h2>
                <div class="skills-grid">
                    {% for category in sections.skills.categories %}
                    <div class="skill-category">
                        <h3>{{ category.name }}</h3>
                        <ul>
                            {% for skill in category.items %}
                            <li>{{ skill }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        <section id="experience">
            <div class="container">
                <h2>{{ sections.experience.title }}</h2>
                <div class="timeline">
                    {% for job in sections.experience.jobs %}
                    <div class="timeline-item">
                        <div class="timeline-date">{{ job.period }}</div>
                        <div class="timeline-content">
                            <h3>{{ job.title }} - {{ job.company }}</h3>
                            <p>{{ job.description | safe }}</p>
                            {% if job.technologies %}
                            <div class="technologies">
                                {% for tech in job.technologies %}
                                <span class="tech-tag">{{ tech }}</span>
                                {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        <section id="projects">
            <div class="container">
                <h2>{{ sections.projects.title }}</h2>
                <div class="projects-grid">
                    {% for project in sections.projects.items %}
                    <div class="project-card">
                        <h3>{{ project.name }}</h3>
                        <p>{{ project.description }}</p>
                        {% if project.technologies %}
                        <div class="technologies">
                            {% for tech in project.technologies %}
                            <span class="tech-tag">{{ tech }}</span>
                            {% endfor %}
                        </div>
                        {% endif %}
                        {% if project.link %}
                        <a href="{{ project.link }}" class="project-link" target="_blank">{{ sections.projects.viewProject }}</a>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        <section id="contact">
            <div class="container">
                <h2>{{ sections.contact.title }}</h2>
                <div class="contact-content">
                    <p>{{ sections.contact.text }}</p>
                    <div class="contact-links">
                        {% for link in sections.contact.links %}
                        <a href="{{ link.url }}" class="contact-link" target="_blank">
                            <span class="icon">{{ link.icon | safe }}</span>
                            <span class="text">{{ link.text }}</span>
                        </a>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>{{ footer.copyright }} &copy; {{ currentYear }} Khalil Charfi</p>
            <div class="social-links">
                {% for link in footer.socialLinks %}
                <a href="{{ link.url }}" target="_blank" aria-label="{{ link.name }}">{{ link.icon | safe }}</a>
                {% endfor %}
            </div>
        </div>
    </footer>

    <script>
        // Store the current language preference
        document.addEventListener('DOMContentLoaded', function() {
            localStorage.setItem('preferred-language', '{{ language }}');
        });
    </script>
</body>
</html>