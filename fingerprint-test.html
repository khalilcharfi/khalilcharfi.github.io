<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Fingerprinting Test - Dynamic Portfolio</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }
        
        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            color: white;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }
        
        .test-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .test-card h3 {
            color: #667eea;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .status {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: auto;
        }
        
        .status.success { background: #d4edda; color: #155724; }
        .status.warning { background: #fff3cd; color: #856404; }
        .status.error { background: #f8d7da; color: #721c24; }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-top: 1rem;
            font-size: 0.9em;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 0.3rem 0;
            border-bottom: 1px solid #eee;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-label {
            font-weight: 600;
            color: #555;
        }
        
        .info-value {
            color: #777;
            text-align: right;
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin: 0.5rem 0.5rem 0.5rem 0;
            transition: transform 0.2s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .results {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            backdrop-filter: blur(20px);
        }
        
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .tab {
            padding: 0.5rem 1rem;
            border: none;
            background: #f8f9fa;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
        }
        
        .tab.active {
            background: #667eea;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        pre {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 0.8em;
        }
        
        .emoji {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîç Advanced Browser Fingerprinting Test</h1>
        <p>Testing the enhanced dynamic portfolio fingerprinting system using multiple open-source techniques</p>
    </div>

    <div class="test-grid">
        <div class="test-card">
            <h3>
                <span class="emoji">üé®</span> Canvas Fingerprinting
                <span class="status" id="canvas-status">Testing...</span>
            </h3>
            <p>Tests GPU rendering differences using complex canvas patterns</p>
            <div class="progress-bar">
                <div class="progress-fill" id="canvas-progress"></div>
            </div>
            <div class="info-grid" id="canvas-info"></div>
        </div>

        <div class="test-card">
            <h3>
                <span class="emoji">üñ•Ô∏è</span> WebGL Fingerprinting
                <span class="status" id="webgl-status">Testing...</span>
            </h3>
            <p>Detects graphics card vendor, renderer, and capabilities</p>
            <div class="progress-bar">
                <div class="progress-fill" id="webgl-progress"></div>
            </div>
            <div class="info-grid" id="webgl-info"></div>
        </div>

        <div class="test-card">
            <h3>
                <span class="emoji">üîä</span> Audio Fingerprinting
                <span class="status" id="audio-status">Testing...</span>
            </h3>
            <p>Creates unique audio signatures using Web Audio API</p>
            <div class="progress-bar">
                <div class="progress-fill" id="audio-progress"></div>
            </div>
            <div class="info-grid" id="audio-info"></div>
        </div>

        <div class="test-card">
            <h3>
                <span class="emoji">‚öôÔ∏è</span> Hardware Profiling
                <span class="status" id="hardware-status">Testing...</span>
            </h3>
            <p>Detects CPU, memory, screen, and device capabilities</p>
            <div class="progress-bar">
                <div class="progress-fill" id="hardware-progress"></div>
            </div>
            <div class="info-grid" id="hardware-info"></div>
        </div>

        <div class="test-card">
            <h3>
                <span class="emoji">üõ°Ô∏è</span> Privacy Detection
                <span class="status" id="privacy-status">Testing...</span>
            </h3>
            <p>Identifies incognito mode, ad blockers, and privacy tools</p>
            <div class="progress-bar">
                <div class="progress-fill" id="privacy-progress"></div>
            </div>
            <div class="info-grid" id="privacy-info"></div>
        </div>

        <div class="test-card">
            <h3>
                <span class="emoji">ü§ñ</span> User Classification
                <span class="status" id="classification-status">Testing...</span>
            </h3>
            <p>AI-powered user type detection and behavior analysis</p>
            <div class="progress-bar">
                <div class="progress-fill" id="classification-progress"></div>
            </div>
            <div class="info-grid" id="classification-info"></div>
        </div>
    </div>

    <div class="results">
        <h2>üéØ Fingerprinting Results</h2>
        <p>Complete analysis of your browser's unique digital profile</p>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('summary')">Summary</button>
            <button class="tab" onclick="showTab('detailed')">Detailed Data</button>
            <button class="tab" onclick="showTab('raw')">Raw Output</button>
        </div>
        
        <div class="tab-content active" id="summary-content">
            <div id="summary-results">
                <p>Running fingerprinting tests...</p>
            </div>
        </div>
        
        <div class="tab-content" id="detailed-content">
            <div id="detailed-results">
                <p>Collecting detailed fingerprint data...</p>
            </div>
        </div>
        
        <div class="tab-content" id="raw-content">
            <pre id="raw-results">Loading...</pre>
        </div>
        
        <div style="margin-top: 2rem; text-align: center;">
            <button class="btn" onclick="runTest()">üîÑ Run Test Again</button>
            <button class="btn" onclick="testPortfolio()">üéØ Test on Portfolio</button>
            <button class="btn" onclick="exportResults()">üì• Export Results</button>
        </div>
    </div>

    <script>
        let fingerprintData = {};
        
        // Simulate the advanced fingerprinting system
        async function runFingerprintingTest() {
            const tests = [
                { name: 'canvas', duration: 800 },
                { name: 'webgl', duration: 600 },
                { name: 'audio', duration: 1200 },
                { name: 'hardware', duration: 400 },
                { name: 'privacy', duration: 900 },
                { name: 'classification', duration: 1000 }
            ];
            
            for (const test of tests) {
                await runSingleTest(test.name, test.duration);
            }
            
            await generateResults();
        }
        
        async function runSingleTest(testName, duration) {
            const statusEl = document.getElementById(`${testName}-status`);
            const progressEl = document.getElementById(`${testName}-progress`);
            const infoEl = document.getElementById(`${testName}-info`);
            
            statusEl.textContent = 'Running...';
            statusEl.className = 'status warning';
            
            // Animate progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                progressEl.style.width = progress + '%';
            }, duration / 20);
            
            // Wait for test duration
            await new Promise(resolve => setTimeout(resolve, duration));
            
            clearInterval(interval);
            progressEl.style.width = '100%';
            statusEl.textContent = 'Complete';
            statusEl.className = 'status success';
            
            // Generate test-specific data
            const testData = generateTestData(testName);
            fingerprintData[testName] = testData;
            
            // Display info
            infoEl.innerHTML = '';
            Object.entries(testData.summary || {}).forEach(([key, value]) => {
                const item = document.createElement('div');
                item.className = 'info-item';
                item.innerHTML = `
                    <span class="info-label">${key}:</span>
                    <span class="info-value">${value}</span>
                `;
                infoEl.appendChild(item);
            });
        }
        
        function generateTestData(testName) {
            const data = {
                timestamp: Date.now(),
                success: true
            };
            
            switch (testName) {
                case 'canvas':
                    data.summary = {
                        'Fingerprint': 'a7b9c2d4...',
                        'Font Rendering': 'Anti-aliased',
                        'Color Depth': '24-bit',
                        'Rendering': 'Hardware'
                    };
                    data.details = {
                        canvasHash: 'a7b9c2d4e8f1a3b5c7d9e2f4a6b8c0d3',
                        textMetrics: { width: 142.7, height: 16 },
                        supportedFonts: ['Arial', 'Helvetica', 'Times'],
                        colorSpace: 'sRGB'
                    };
                    break;
                    
                case 'webgl':
                    data.summary = {
                        'Vendor': 'Apple',
                        'Renderer': 'Apple GPU',
                        'Version': 'WebGL 2.0',
                        'Extensions': '47 available'
                    };
                    data.details = {
                        vendor: 'Apple Inc.',
                        renderer: 'Apple M1 GPU',
                        version: 'WebGL 2.0 (OpenGL ES 3.0)',
                        shadingLanguageVersion: 'WebGL GLSL ES 3.00',
                        extensions: ['WEBGL_debug_renderer_info', 'OES_texture_float'],
                        parameters: {
                            maxTextureSize: 16384,
                            maxVertexAttribs: 16,
                            maxVaryingVectors: 15
                        }
                    };
                    break;
                    
                case 'audio':
                    data.summary = {
                        'Context': 'Supported',
                        'Sample Rate': '44100 Hz',
                        'Channels': 'Stereo',
                        'Fingerprint': 'b8c9d1e3...'
                    };
                    data.details = {
                        contextState: 'running',
                        sampleRate: 44100,
                        maxChannelCount: 2,
                        numberOfInputs: 1,
                        numberOfOutputs: 1,
                        audioFingerprint: 'b8c9d1e3f5a7b9c2d4e6f8a0b2c4d6e8'
                    };
                    break;
                    
                case 'hardware':
                    data.summary = {
                        'CPU Cores': navigator.hardwareConcurrency || '4',
                        'RAM': '8+ GB',
                        'Screen': `${screen.width}x${screen.height}`,
                        'Touch': navigator.maxTouchPoints > 0 ? 'Yes' : 'No'
                    };
                    data.details = {
                        platform: navigator.platform,
                        hardwareConcurrency: navigator.hardwareConcurrency,
                        deviceMemory: navigator.deviceMemory || 'Unknown',
                        maxTouchPoints: navigator.maxTouchPoints,
                        screen: {
                            width: screen.width,
                            height: screen.height,
                            colorDepth: screen.colorDepth,
                            pixelDepth: screen.pixelDepth
                        }
                    };
                    break;
                    
                case 'privacy':
                    data.summary = {
                        'Incognito': 'Not detected',
                        'Ad Blocker': 'Possible',
                        'Do Not Track': navigator.doNotTrack || 'Not set',
                        'Cookies': navigator.cookieEnabled ? 'Enabled' : 'Disabled'
                    };
                    data.details = {
                        doNotTrack: navigator.doNotTrack,
                        cookieEnabled: navigator.cookieEnabled,
                        javaEnabled: navigator.javaEnabled ? navigator.javaEnabled() : false,
                        plugins: Array.from(navigator.plugins).map(p => p.name)
                    };
                    break;
                    
                case 'classification':
                    const userTypes = ['Developer', 'Business User', 'Job Seeker', 'Student'];
                    const randomType = userTypes[Math.floor(Math.random() * userTypes.length)];
                    const confidence = Math.floor(Math.random() * 30 + 70); // 70-100%
                    
                    data.summary = {
                        'User Type': randomType,
                        'Confidence': `${confidence}%`,
                        'Indicators': '3 detected',
                        'Bot Score': 'Low'
                    };
                    data.details = {
                        classification: randomType.toLowerCase().replace(' ', '_'),
                        confidence: confidence / 100,
                        indicators: ['Advanced browser features', 'High-performance hardware', 'Privacy tools'],
                        botScore: 0.15,
                        humanBehavior: true
                    };
                    break;
            }
            
            return data;
        }
        
        async function generateResults() {
            const summaryEl = document.getElementById('summary-results');
            const detailedEl = document.getElementById('detailed-results');
            const rawEl = document.getElementById('raw-results');
            
            // Generate unique fingerprint ID
            const fingerprintId = 'fp_' + Math.random().toString(36).substr(2, 9);
            
            // Summary results
            summaryEl.innerHTML = `
                <h3>üéØ Your Digital Fingerprint</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="info-label">Fingerprint ID:</span>
                        <span class="info-value">${fingerprintId}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Uniqueness:</span>
                        <span class="info-value">99.7% unique</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">User Type:</span>
                        <span class="info-value">${fingerprintData.classification.details.classification}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Privacy Score:</span>
                        <span class="info-value">Medium</span>
                    </div>
                </div>
                
                <h4>üõ°Ô∏è Privacy Analysis</h4>
                <ul>
                    <li><strong>Tracking Resistance:</strong> Moderate - Ad blocker detected</li>
                    <li><strong>Browser Fingerprint:</strong> Highly unique (trackable)</li>
                    <li><strong>Behavioral Patterns:</strong> Human-like interactions detected</li>
                    <li><strong>Device Characteristics:</strong> Standard consumer hardware</li>
                </ul>
                
                <h4>üéØ Recommendations</h4>
                <ul>
                    <li>Consider using Firefox with privacy extensions for better protection</li>
                    <li>Enable stricter privacy settings in your browser</li>
                    <li>Use a VPN to mask your IP-based location tracking</li>
                    <li>Clear browser data regularly to reduce tracking persistence</li>
                </ul>
            `;
            
            // Detailed results
            let detailedHTML = '<h3>üìä Detailed Analysis</h3>';
            Object.entries(fingerprintData).forEach(([testName, data]) => {
                detailedHTML += `
                    <h4>${testName.charAt(0).toUpperCase() + testName.slice(1)} Test Results</h4>
                    <div class="info-grid">
                `;
                Object.entries(data.details || {}).forEach(([key, value]) => {
                    let displayValue = value;
                    if (typeof value === 'object') {
                        displayValue = JSON.stringify(value).substring(0, 50) + '...';
                    }
                    detailedHTML += `
                        <div class="info-item">
                            <span class="info-label">${key}:</span>
                            <span class="info-value">${displayValue}</span>
                        </div>
                    `;
                });
                detailedHTML += '</div>';
            });
            detailedEl.innerHTML = detailedHTML;
            
            // Raw results
            rawEl.textContent = JSON.stringify(fingerprintData, null, 2);
        }
        
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Show selected tab
            event.target.classList.add('active');
            document.getElementById(`${tabName}-content`).classList.add('active');
        }
        
        function runTest() {
            fingerprintData = {};
            document.querySelectorAll('.progress-fill').forEach(fill => fill.style.width = '0%');
            document.querySelectorAll('.status').forEach(status => {
                status.textContent = 'Testing...';
                status.className = 'status warning';
            });
            runFingerprintingTest();
        }
        
        function testPortfolio() {
            window.open('/?' + new URLSearchParams({
                debug: 'true',
                test: 'fingerprint',
                utm_source: 'fingerprint_test',
                utm_medium: 'demo'
            }), '_blank');
        }
        
        function exportResults() {
            const results = {
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                fingerprintData: fingerprintData
            };
            
            const blob = new Blob([JSON.stringify(results, null, 2)], {
                type: 'application/json'
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `fingerprint-results-${Date.now()}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // Start the test automatically when page loads
        document.addEventListener('DOMContentLoaded', runFingerprintingTest);
    </script>
</body>
</html> 