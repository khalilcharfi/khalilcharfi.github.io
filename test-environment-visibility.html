<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environment Visibility Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .test-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .enabled { background: #2d5a2d; }
        .disabled { background: #5a2d2d; }
        .info { background: #2d4a5a; }
        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .instructions {
            background: #3a3a3a;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üß™ Environment Visibility Test</h1>
    
    <div class="instructions">
        <h3>How to Test:</h3>
        <ol>
            <li><strong>Development Mode:</strong> Run <code>npm run dev</code> - All elements should be rendered and visible</li>
            <li><strong>Production Mode:</strong> Run <code>npm run build:prod && npm run preview:prod</code> - Development elements should be completely removed from DOM</li>
            <li><strong>Custom Mode:</strong> Modify <code>.env</code> file and restart dev server</li>
        </ol>
        <p><strong>Note:</strong> Elements are completely removed from rendering (not just hidden with CSS) for better performance and smaller bundle size.</p>
    </div>

    <div class="test-section">
        <h2>üéØ Visitor Controls Test</h2>
        <p>Look for the "üéØ Personalize" button in the top-right area of the portfolio.</p>
        <div class="status" id="visitor-controls-status">
            <strong>Status:</strong> <span id="visitor-controls-text">Checking...</span>
        </div>
        <p><strong>Expected:</strong> Rendered in development, completely removed from DOM in production</p>
    </div>

    <div class="test-section">
        <h2>üìä Profile Insights Test</h2>
        <p>Look for the "üìä" button in the bottom-right area of the portfolio.</p>
        <div class="status" id="profile-insights-status">
            <strong>Status:</strong> <span id="profile-insights-text">Checking...</span>
        </div>
        <p><strong>Expected:</strong> Rendered in development, completely removed from DOM in production</p>
    </div>

    <div class="test-section">
        <h2>üåê Translation Debug Test</h2>
        <p>Look for the "üåê Translation Debug" section at the bottom of the portfolio.</p>
        <div class="status" id="translation-debug-status">
            <strong>Status:</strong> <span id="translation-debug-text">Checking...</span>
        </div>
        <p><strong>Expected:</strong> Rendered in development, completely removed from DOM in production</p>
    </div>

    <div class="test-section">
        <h2>üîç Debug Info Test</h2>
        <p>Look for the "Visitor Profile Debug" collapsible section at the bottom.</p>
        <div class="status" id="debug-info-status">
            <strong>Status:</strong> <span id="debug-info-text">Checking...</span>
        </div>
        <p><strong>Expected:</strong> Rendered in development, completely removed from DOM in production</p>
    </div>

    <div class="test-section">
        <h2>ü§ñ Chatbot Test</h2>
        <p>Look for the chatbot button in the bottom-right corner of the portfolio.</p>
        <div class="status" id="chatbot-status">
            <strong>Status:</strong> <span id="chatbot-text">Checking...</span>
        </div>
        <p><strong>Expected:</strong> Only rendered if GEMINI_API_KEY is valid and VITE_ENABLE_CHATBOT=true</p>
        <p><strong>Enhanced Testing:</strong> <a href="test-gemini-connection.html" target="_blank" style="color: #4CAF50;">Open Gemini API Connection Test</a></p>
    </div>

    <div class="test-section">
        <h2>üîç Gemini API Connection Status</h2>
        <p>Look for the connection status indicator in the top-right corner (development mode only).</p>
        <div class="status" id="gemini-status">
            <strong>Status:</strong> <span id="gemini-text">Checking...</span>
        </div>
        <p><strong>Expected:</strong> Shows connection status, error messages, and retry button in development</p>
    </div>

    <div class="test-section">
        <h2>Environment Variables</h2>
        <div class="info">
            <h3>Current Environment Variables:</h3>
            <ul id="env-vars">
                <li>Loading...</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>Quick Commands</h2>
        <div class="info">
            <h3>Test Commands:</h3>
            <pre>
# Development (all elements visible)
npm run dev

# Production build (elements hidden)
npm run build:prod
npm run preview:prod

# Check environment variables
echo $NODE_ENV
            </pre>
        </div>
    </div>

    <script>
        // Test if elements are visible
        function checkElementVisibility() {
            // Check visitor controls
            const visitorControls = document.querySelector('.visitor-controls');
            const visitorStatus = document.getElementById('visitor-controls-text');
            if (visitorControls) {
                visitorStatus.textContent = '‚úÖ VISIBLE';
                document.getElementById('visitor-controls-status').className = 'status enabled';
            } else {
                visitorStatus.textContent = '‚ùå HIDDEN';
                document.getElementById('visitor-controls-status').className = 'status disabled';
            }

            // Check profile insights
            const profileInsights = document.querySelector('.profile-insights-toggle');
            const profileStatus = document.getElementById('profile-insights-text');
            if (profileInsights) {
                profileStatus.textContent = '‚úÖ VISIBLE';
                document.getElementById('profile-insights-status').className = 'status enabled';
            } else {
                profileStatus.textContent = '‚ùå HIDDEN';
                document.getElementById('profile-insights-status').className = 'status disabled';
            }

            // Check translation debug
            const translationDebug = document.querySelector('h3');
            const translationStatus = document.getElementById('translation-debug-text');
            if (translationDebug && translationDebug.textContent.includes('Translation Debug')) {
                translationStatus.textContent = '‚úÖ VISIBLE';
                document.getElementById('translation-debug-status').className = 'status enabled';
            } else {
                translationStatus.textContent = '‚ùå HIDDEN';
                document.getElementById('translation-debug-status').className = 'status disabled';
            }

            // Check debug info
            const debugInfo = document.querySelector('.debug-info');
            const debugStatus = document.getElementById('debug-info-text');
            if (debugInfo) {
                debugStatus.textContent = '‚úÖ VISIBLE';
                document.getElementById('debug-info-status').className = 'status enabled';
            } else {
                debugStatus.textContent = '‚ùå HIDDEN';
                document.getElementById('debug-info-status').className = 'status disabled';
            }

            // Check chatbot
            const chatbot = document.querySelector('.chatbot-fab');
            const chatbotStatus = document.getElementById('chatbot-text');
            if (chatbot) {
                chatbotStatus.textContent = '‚úÖ VISIBLE';
                document.getElementById('chatbot-status').className = 'status enabled';
            } else {
                chatbotStatus.textContent = '‚ùå HIDDEN';
                document.getElementById('chatbot-status').className = 'status disabled';
            }

            // Check Gemini connection status
            const geminiStatus = document.querySelector('.gemini-connection-status');
            const geminiStatusText = document.getElementById('gemini-text');
            if (geminiStatus) {
                const statusText = geminiStatus.querySelector('div').textContent;
                geminiStatusText.textContent = '‚úÖ VISIBLE - ' + statusText;
                document.getElementById('gemini-status').className = 'status enabled';
            } else {
                geminiStatusText.textContent = '‚ùå HIDDEN (only visible in development)';
                document.getElementById('gemini-status').className = 'status disabled';
            }
        }

        // Display environment variables
        function displayEnvVars() {
            const envVarsList = document.getElementById('env-vars');
            const envVars = [
                'NODE_ENV',
                'VITE_SHOW_DEV_ELEMENTS',
                'VITE_SHOW_VISITOR_CONTROLS',
                'VITE_SHOW_PROFILE_INSIGHTS',
                'VITE_SHOW_TRANSLATION_DEBUG',
                'VITE_SHOW_DEBUG_INFO',
                'VITE_ENABLE_PERSONAS',
                'VITE_ENABLE_DYNAMIC_CONTENT',
                'VITE_ENABLE_CHATBOT'
            ];

            envVarsList.innerHTML = envVars.map(envVar => {
                const value = window[envVar] || 'undefined';
                return `<li><code>${envVar}</code>: ${value}</li>`;
            }).join('');
        }

        // Run checks when page loads
        window.addEventListener('load', () => {
            checkElementVisibility();
            displayEnvVars();
        });

        // Re-check every 2 seconds in case elements load dynamically
        setInterval(checkElementVisibility, 2000);
    </script>
</body>
</html>
